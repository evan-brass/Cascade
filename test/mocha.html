<html>
<head>
	<meta charset="utf-8">
	<title>Cascade - Tests</title>
	<link href="https://unpkg.com/mocha@4.0.1/mocha.css" rel="stylesheet" />
	<script src="https://unpkg.com/mocha@4.0.1/mocha.js"></script>
</head>
<body>
	<div id="mocha"></div>
	<script type="module" src="setup.js"></script>
	<script type="module" src="run.js"></script>
	<script>
		let funcs = [
			// Different ways of defining a function:
			function (param1, param2, param3) { console.log(param1, param2, param3); },
			function(param1, param2, param3) { console.log(param1, param2, param3); },
			function (param1, param2, param3) { console.log(param1, param2, param3); },
			function (param1, param2, param3){ console.log(param1, param2, param3); },
			function named(param1, param2, param3) { console.log(param1, param2, param3); },
			(param1, param2, param3) => { console.log(param1, param2, param3); },
			({ func(param1, param2, param3) { console.log(param1, param2, param3); } }).func,
			new Function('param1', 'param2', 'param3', 'console.log(param1, param2, param3)'),
			(x) => 2 * x,
			function wierd_name(param1, param2, param3) { console.log(param1, param2, param3);},
			x => 2 * x, // Currently broken

			// No Parameters:
			function () { console.log(''); },
			function named() { console.log(''); },
			() => { console.log(''); },
			({ func() { console.log(''); } }).func,
			new Function('console.log("")'),

			// Closures:
			(function (x, y, z) {
				return function (param1, param2, param3) {
					console.log(param1, param2, param3);
				};
			})(),
			((x, y, z) => (param1, param2, param3) => {
				console.log(param1, param2, param3);
				})()
		];

		console.group('.toString()');
		funcs.map(func => func.toString()).forEach(str => console.log(str));
		console.groupEnd();

		console.group('new String()');
		funcs.map(func => new String(func)).forEach(str => console.log(str));
		console.groupEnd();

		console.group('Arguments?:');
		funcs.map(func => (new String(func))
			.match(/^(function)?\s*\w*\(([^)]*)\)/)[2]
			.split(',')
			.map(arg => arg.trim())
			.filter(parName => parName != '')
		).forEach(str => console.log(str));
		console.groupEnd();


	</script>
</body>
</html>